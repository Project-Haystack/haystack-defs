//
// Copyright (c) 2011, Project-Haystack
// Licensed under the Academic Free License version 3.0
//
// History:
//   22 Feb 2011  Brian Frank  Creation
//    9 Jan 2019  Brian Frank  New design
//

--------------------------------------------------------------------------
def: ^vav
is: ^equip
wikipedia: `https://wikipedia.org/wiki/Variable_air_volume`
doc: "Variable air volume terminal unit"
--------------------------------------------------------------------------
def: ^coolingOnly-vav
is: ^vav
doc: "Cooling only VAV without fan or reheat"
--------------------------------------------------------------------------
def: ^fanPowered-vav
is: ^vav
doc: "VAV contains a fan with reheat"
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Sections
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vav.discharge-duct
doc: "Air exiting VAV to the zone"
--------------------------------------------------------------------------
def: ^vav.inlet-duct
doc: "Air entering VAV from the AHU"
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// VAV Common
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vav.ductConfig
--------------------------------------------------------------------------
def: ^vav.ahuRef
doc: "AHU which supplies air to VAV"
--------------------------------------------------------------------------
def: ^vav.vavModulation
--------------------------------------------------------------------------
def: ^vav.vavAirCircuit
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// VAV Modulation
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vavModulation
is: ^marker
doc: "How does VAV modulate the temp based on duct pressure"
--------------------------------------------------------------------------
def: ^pressureDependent
is: ^vavModulation
doc:
  VAV damper modulates to control space temp; dependent on duct pressure
  being maintained
--------------------------------------------------------------------------
def: ^pressureIndependent
is: ^vavModulation
doc:
  VAV damper or a control valve that modulates to maintain desired flow
  setpoint; independent of the duct pressure
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// Fan Powered
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^fanPowered-vav.vavAirCircuit
--------------------------------------------------------------------------
def: ^fanPowered-vav.vavReheat
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// VAV Air Circuit
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vavAirCircuit
is: ^marker
doc: "How does the VAV pull in air"
--------------------------------------------------------------------------
def: ^vav-series
is: ^vavAirCircuit
doc: "VAV pulls air from the primary air flow"
--------------------------------------------------------------------------
def: ^vav-parallel
is: ^vavAirCircuit
doc: "VAV pulls air from outside the primary air flow"
--------------------------------------------------------------------------

//////////////////////////////////////////////////////////////////////////
// VAV Reheat
//////////////////////////////////////////////////////////////////////////

--------------------------------------------------------------------------
def: ^vavReheat
is: ^heating-process
outputs: ^air
doc: "Method used by VAV to reheat air"
--------------------------------------------------------------------------
def: ^vav-hotWaterHeating
is: [^hotWaterHeating, ^vavReheat]
--------------------------------------------------------------------------
def: ^vav-steamHeating
is: [^steamHeating, ^vavReheat]
--------------------------------------------------------------------------
def: ^vav-elecHeating
is: [^elecHeating, ^vavReheat]
--------------------------------------------------------------------------


